<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mapper: OpenOrienteering::XmlRecoveryHelper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="openorienteering.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mapper
   &#160;<span id="projectnumber">0.9.0</span>
   </div>
   <div id="projectbrief">API documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceOpenOrienteering.html">OpenOrienteering</a></li><li class="navelem"><a class="el" href="classOpenOrienteering_1_1XmlRecoveryHelper.html">XmlRecoveryHelper</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classOpenOrienteering_1_1XmlRecoveryHelper-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">OpenOrienteering::XmlRecoveryHelper Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class provides recovery from invalid characters in an XML stream.  
 <a href="classOpenOrienteering_1_1XmlRecoveryHelper.html#details">More...</a></p>

<p><code>#include &lt;xml_stream_util.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1630f3750ba76eab39aed86ee27d3f9e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpenOrienteering_1_1XmlRecoveryHelper.html#a1630f3750ba76eab39aed86ee27d3f9e">XmlRecoveryHelper</a> (<a class="elRef" doxygen="qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qxmlstreamreader.html">QXmlStreamReader</a> &amp;xml)</td></tr>
<tr class="memdesc:a1630f3750ba76eab39aed86ee27d3f9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new recovery helper for the given xml stream.  <a href="#a1630f3750ba76eab39aed86ee27d3f9e">More...</a><br /></td></tr>
<tr class="separator:a1630f3750ba76eab39aed86ee27d3f9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a122c7c91c74a97c7d31b8b3f4da2b03a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a0ecf26b576b9a54eca656b9be7ba6a06">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpenOrienteering_1_1XmlRecoveryHelper.html#a122c7c91c74a97c7d31b8b3f4da2b03a">operator()</a> ()</td></tr>
<tr class="memdesc:a122c7c91c74a97c7d31b8b3f4da2b03a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the stream for an error which this utility can handle, applies corrections, and resets the stream.  <a href="#a122c7c91c74a97c7d31b8b3f4da2b03a">More...</a><br /></td></tr>
<tr class="separator:a122c7c91c74a97c7d31b8b3f4da2b03a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class provides recovery from invalid characters in an XML stream. </p>
<p>Some characters are not allowed in well-formed XML 1.0 (cf. <a href="https://www.w3.org/TR/2008/REC-xml-20081126/#NT-Char">https://www.w3.org/TR/2008/REC-xml-20081126/#NT-Char</a>). While <a class="elRef" doxygen="qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qxmlstreamwriter.html">QXmlStreamWriter</a> will not complain when writing such characters, <a class="elRef" doxygen="qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qxmlstreamreader.html">QXmlStreamReader</a> will raise a NotWellFormedError. This class will remove offending characters from the input and reset the stream reader to the state it had when the helper object was initialized.</p>
<p>In a single recovery attempt, the utility tries to handle all offending characters from the element for which the tool was constructed. For each offending character, the whole XML data is parsed again from the start. That's why multiple corrections may take a long time to run.</p>
<p>The XML stream must be based on a <a class="elRef" doxygen="qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qiodevice.html">QIODevice</a> which supports <a class="elRef" doxygen="qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qiodevice.html#seek">QIODevice::seek</a>.</p>
<p>Synopsis: </p><pre class="fragment">XmlRecoveryHelper recovery(xml);
auto text = xml.readElementText();
if (xml.hasError() &amp;&amp; recovery())
{
    addWarning(tr("Some invalid characters had to be removed.");
    text = xml.readElementText();
}</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1630f3750ba76eab39aed86ee27d3f9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1630f3750ba76eab39aed86ee27d3f9e">&#9670;&nbsp;</a></span>XmlRecoveryHelper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">OpenOrienteering::XmlRecoveryHelper::XmlRecoveryHelper </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qxmlstreamreader.html">QXmlStreamReader</a> &amp;&#160;</td>
          <td class="paramname"><em>xml</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a new recovery helper for the given xml stream. </p>
<p>Captures the current position in the XML stream (<a class="elRef" doxygen="qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qxmlstreamreader.html#characterOffset">QXmlStreamReader::characterOffset()</a>). </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a122c7c91c74a97c7d31b8b3f4da2b03a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a122c7c91c74a97c7d31b8b3f4da2b03a">&#9670;&nbsp;</a></span>operator()()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a0ecf26b576b9a54eca656b9be7ba6a06">bool</a> OpenOrienteering::XmlRecoveryHelper::operator() </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the stream for an error which this utility can handle, applies corrections, and resets the stream. </p>
<p>If this operator returns false if either there was a different type of error, or if recovery failed. If it returns true, the stream was modified in order to fix the errors which are handled by this utility, and a new attempt can be made to parse the remainder of the stream. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/util/<a class="el" href="xml__stream__util_8h.html">xml_stream_util.h</a> (<a href="https://github.com/OpenOrienteering/mapper/blob/417289a/src/util/xml_stream_util.h"><tt>417289a</tt></a> on 16 Aug 2019)</li>
<li>src/util/<a class="el" href="xml__stream__util_8cpp.html">xml_stream_util.cpp</a> (<a href="https://github.com/OpenOrienteering/mapper/blob/36c9efd/src/util/xml_stream_util.cpp"><tt>36c9efd</tt></a> on 29 Sep 2019)</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
